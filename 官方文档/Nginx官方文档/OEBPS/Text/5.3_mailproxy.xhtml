<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title></title>
  <link href="../Styles/Style.css" rel="stylesheet" type="text/css" />
  <link href="../Styles/code.css" rel="stylesheet" type="text/css" />
</head>

<body>
  <h2>MailProxy</h2>

  <p>Nginx can proxy IMAP, POP3, and SMTP protocols.<br />
  Ngin可以代理IMAP，POP3和SMTP协议</p>

  <h3 class="sigil_not_in_toc">指令</h3>

  <h3 class="sigil_not_in_toc">proxy</h3>

  <p><b>syntax:</b> <i>proxy</i> <i><b>on | off</b></i></p>

  <p><b>default:</b> <i>off</i></p>

  <p><b>context:</b> <i>mail, server</i></p>

  <p>With this directive you can enable or disable the proxy for mail.<br />
  使用这条指令你可以开启和关闭邮件代理</p>

  <h3 class="sigil_not_in_toc">proxy_buffer</h3>

  <p><b>syntax:</b> <i>proxy_buffer</i> <i><b>size</b></i></p>

  <p><b>default:</b> <i>4K/8K</i></p>

  <p><b>context:</b> <i>mail, server</i></p>

  <p>With this directive you can set the buffer size for the proxy connection. The default value is equal to the size of a page (this can be either 4K or 8K depending on the platform).<br />
  使用这条指令你可以设置代理连接的缓存大小。默认值为页面的大小(这个根据平台的不同可能是4K或者8K）</p>

  <h3 class="sigil_not_in_toc">proxy_pass_error_message</h3>

  <p><b>syntax:</b> <i>proxy_pass_error_message</i> <i><b>on | off</b></i></p>

  <p><b>default:</b> <i>off</i></p>

  <p><b>context:</b> <i>mail, server</i></p>

  <p>With this directive you can pass authentification error messages obtained from the backend back to the client. Usually if authorization in nginx passed successfully then the backend cannot return errors back to the client.<br />
  通过这条指令你可以使得客户端忽略从后端获得的验证错误消息.通常验证成不会返回错误消息到客户端。</p>

  <p>But for some POP3 servers errors in response to correct password is a regular behavior. For example <a class="external text" href="http://www.stalker.com/" rel="nofollow" title="http://www.stalker.com/">CommuniGatePro</a> notifies user about overcrowding of the mailbox (or other events) periodically issuing an error in authorization. In this case is worth indicating proxy_error_message on.<br />
  但是在POP3服务器中错误是用来更重密码。例如<a class="external text" href="http://www.stalker.com/" rel="nofollow" title="http://www.stalker.com/">CommuniGatePro</a> 通过验证返回邮箱收件箱已满的错误来通知用户，这样的代理错误信息是很有意义的。</p>

  <h3 class="sigil_not_in_toc">proxy_timeout</h3>

  <p><b>syntax:</b> <i>proxy_timeout</i> <i><b>time</b></i></p>

  <p><b>default:</b> <i>24h</i></p>

  <p><b>context:</b> <i>mail, server</i></p>

  <p>With this directive you can set the timeout for the proxy connection.<br />
  使用这条指令你可以设置代理连接的超时时间。</p>

  <h3 class="sigil_not_in_toc">xclient</h3>

  <p><b>syntax:</b> <i>xclient</i> <i><b>on | off</b></i></p>

  <p><b>default:</b> <i>on</i></p>

  <p><b>context:</b> <i>mail, server</i></p>

  <p>With this directive you can enable or disable the command XCLIENT with the connection to SMTP backend. This allows the backend to enforce limitations on the client based on IP/HELO/LOGIN.<br />
  使用这条指令你可以开启或者关闭命令XCLIENT的SMTP后端连接.这个使得后端强制可以通过IP／HELO／LOGIN限定客户端</p>

  <p>If xclient is enabled then nginx first transfers to the backend:<br />
  如果xclient被启用，nginx首先转换到后端</p>
  <pre>EHLO server_name
</pre>

  <p>Then:</p>
  <pre>XCLIENT PROTO=ESMTP HELO=client_helo ADDR=client_ip LOGIN=authentificated_user NAME=[UNAVAILABLE] 
</pre>
</body>
</html>
